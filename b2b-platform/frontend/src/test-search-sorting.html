<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .product {
            border: 1px solid #ccc;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .product-title { font-weight: bold; color: #333; }
        .product-description { color: #666; margin-top: 5px; }
        .relevance {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            display: inline-block;
            margin-bottom: 10px;
        }
        .search-input {
            padding: 10px;
            font-size: 16px;
            width: 300px;
            margin-right: 10px;
        }
        .search-button {
            padding: 10px 20px;
            font-size: 16px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .results { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üîç –¢–µ—Å—Ç –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</h1>

    <p>
        <strong>–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:</strong> –¢–æ–≤–∞—Ä—ã —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏ –≤ <em>–Ω–∞–∑–≤–∞–Ω–∏–∏</em> –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏,
        –∑–∞—Ç–µ–º —Ç–æ–≤–∞—Ä—ã —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏ –≤ <em>–æ–ø–∏—Å–∞–Ω–∏–∏</em>.
    </p>

    <div>
        <input type="text" id="searchInput" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å..." value="—Ç–æ–≤–∞—Ä">
        <button onclick="testSearch()" class="search-button">–ü–æ–∏—Å–∫</button>
    </div>

    <div id="results" class="results"></div>

    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
        const testProducts = [
            {
                id: 1,
                title: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –∫–∏—Ä–ø–∏—á",
                description: "–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–æ–º–æ–≤ –∏ –∑–¥–∞–Ω–∏–π"
            },
            {
                id: 2,
                title: "–¢–æ–≤–∞—Ä –¥–ª—è –¥–æ–º–∞",
                description: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±—ã—Ç—É"
            },
            {
                id: 3,
                title: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞ –∏ –≥–∞–¥–∂–µ—Ç—ã",
                description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä: —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã, –ø–ª–∞–Ω—à–µ—Ç—ã –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã"
            },
            {
                id: 4,
                title: "–¢–æ–≤–∞—Ä ‚Ññ1 –ø–æ–ø—É–ª—è—Ä–Ω—ã–π",
                description: "–°–∞–º—ã–π –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
            },
            {
                id: 5,
                title: "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å",
                description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Å–ø–æ—Ä—Ç–∞ –∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞"
            },
            {
                id: 6,
                title: "–¢–æ–≤–∞—Ä—ã –¥–ª—è –æ—Ñ–∏—Å–∞",
                description: "–ö–∞–Ω—Ü–µ–ª—è—Ä—Å–∫–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"
            }
        ];

        // –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞)
        function getProductRelevance(product, searchQuery) {
            const queryLower = searchQuery.toLowerCase();
            const titleLower = product.title.toLowerCase();
            const descriptionLower = product.description.toLowerCase();

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
            if (titleLower === queryLower) return { priority: 1, reason: "–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
            if (titleLower.startsWith(queryLower)) return { priority: 2, reason: "–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—Ä–æ—Å–∞" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –µ—Å—Ç—å –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ (–ª—é–±–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
            if (titleLower.includes(queryLower)) return { priority: 3, reason: "–ó–∞–ø—Ä–æ—Å –Ω–∞–π–¥–µ–Ω –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
            if (descriptionLower === queryLower) return { priority: 4, reason: "–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
            if (descriptionLower.startsWith(queryLower)) return { priority: 5, reason: "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—Ä–æ—Å–∞" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6: –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –µ—Å—Ç—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ (–ª—é–±–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
            if (descriptionLower.includes(queryLower)) return { priority: 6, reason: "–ó–∞–ø—Ä–æ—Å –Ω–∞–π–¥–µ–Ω –≤ –æ–ø–∏—Å–∞–Ω–∏–∏" };

            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 7: –Ω–µ—Ç –ø—Ä—è–º—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
            return { priority: 7, reason: "–ù–µ—Ç –ø—Ä—è–º—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π" };
        }

        function testSearch() {
            const query = document.getElementById('searchInput').value.trim();
            const resultsDiv = document.getElementById('results');

            if (!query) {
                resultsDiv.innerHTML = '<p>–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</p>';
                return;
            }

            // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
            const filteredProducts = testProducts.filter(product => {
                const queryLower = query.toLowerCase();
                return product.title.toLowerCase().includes(queryLower) ||
                       product.description.toLowerCase().includes(queryLower);
            });

            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
            const sortedProducts = filteredProducts.map(product => {
                const relevance = getProductRelevance(product, query);
                return { ...product, relevance };
            }).sort((a, b) => {
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (–º–µ–Ω—å—à–µ = –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
                if (a.relevance.priority !== b.relevance.priority) {
                    return a.relevance.priority - b.relevance.priority;
                }
                // –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
                return a.title.localeCompare(b.title);
            });

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            if (sortedProducts.length === 0) {
                resultsDiv.innerHTML = `<p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "<strong>${query}</strong>" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>`;
                return;
            }

            const resultsHTML = `
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è: "<strong>${query}</strong>"</h3>
                <p>–ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${sortedProducts.length}</p>
                ${sortedProducts.map(product => `
                    <div class="product">
                        <div class="relevance">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ${product.relevance.priority}: ${product.relevance.reason}</div>
                        <div class="product-title">${highlightMatch(product.title, query)}</div>
                        <div class="product-description">${highlightMatch(product.description, query)}</div>
                    </div>
                `).join('')}
            `;

            resultsDiv.innerHTML = resultsHTML;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ —Ç–µ–∫—Å—Ç–µ
        function highlightMatch(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark>$1</mark>');
        }

        // –ü–æ–∏—Å–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                testSearch();
            }
        });

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', testSearch);
    </script>
</body>
</html>